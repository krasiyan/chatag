{
  "name": "{{{name}}}",
  "remote": "ssh {{{staging server user}}}@{{{staging domain}}}",
  "nodeVersion": "4.2.3",
  "sourceNode": ". ~/.nvm/nvm.sh && nvm use v{nodeVersion}",
  "cwd": "~/{{{name}}}",
  "main": "index.js",
  "source": "{{{git url}}}",
  "branch": "staging",
  "origin": "origin",
  "runAngel": "CELL_MODE=_staging node ./node_modules/.bin/angel",
  "start": "{sourceNode} && cd {cwd} && CELL_MODE=_staging pm2 start index.js --name '{name}' -x",
  "stop": "{sourceNode} && cd {cwd} && pm2 stop {name}",
  "restart": "{sourceNode} && cd {cwd} && pm2 restart {name}",
  "status": "{sourceNode} && cd {cwd} && pm2 status {name}",
  "install": "mkdir -p {cwd} && cd {cwd} && git clone {source} . && {sourceNode} && npm install --production",
  "pull": "cd {cwd} && git fetch {origin} && git checkout {branch} && git pull {origin} {branch} && {sourceNode} && npm install --production",
  "upgrade": "{pull} && {restart}",
  "rollback": "cd {cwd} && {sourceNode} && {runAngel} rollback && {restart}",
  "uninstall": "rm -rf {cwd}",
  "setup": "git clone https://github.com/creationix/nvm.git ~/.nvm && . ~/.nvm/nvm.sh && nvm install v{nodeVersion} && npm install pm2 -g && {install} && {start} && pm2 startup"
}